# Case02：購買ログEDAによる顧客理解と前提条件の検証  
**（SQL × Python）**

## 背景・想定シナリオ
CRM施策やプロモーション最適化を検討するにあたり、  
「顧客間に意味のある行動差が存在するか」を事前に確認する必要がある。

本ケースでは、ECサイトの購買ログを用いて、

- 顧客ごとに行動特性の差が見られるか
- 追加の分析（セグメンテーションやモデル化）を行う前提が成立するか

を **探索的データ分析（EDA）** により検証する。

---

## 分析目的
- 購買ログから顧客単位の行動指標を整理する
- 顧客間に有意な行動差・構造的な傾向が存在するかを確認する
- 後続の施策設計・高度な分析を行うべきかを判断する

---

## 分析方針
- 仮説を固定せず、EDAを中心にデータ構造を理解する
- 無理に差を作らず、「差が見られない」場合も結論として受け入れる
- SQLとPythonを役割分担し、可読性と再現性を重視する

---

## 使用データ
- ECサイトの購買ログ（order単位）
- 顧客ID、購入金額、購入日時、商品カテゴリ など

※ 実データは含まれていません。

---

## 分析プロセス

### 1. SQLによる指標・特徴量設計
- order単位データをcustomer単位に集約
- 以下のような指標を作成
  - 購買回数
  - 累計購買金額
  - 初回購買日時・初回購買金額
  - 購買カテゴリ構成

分析に必要な最小限の指標をSQLで作成し、  
Python側では加工を行わない設計とした。

---

### 2. PythonによるEDA
SQLで作成した顧客単位データをもとに、EDAを実施。

- 各指標の分布確認
- リピート顧客／非リピート顧客の比較
- 極端な外れ値や偏りの確認
- 指標間の関係性の可視化

EDAを通じて、  
「顧客を分けて考える意味があるか」に注目した。

---

## 結果・解釈

### 主な結果
- 初回購買金額や初回購買カテゴリのみでは、
  リピート行動を十分に説明できない
- 顧客間の指標分布は連続的で、
  明確な分離構造は確認できなかった
- 本データのみを用いた
  - 顧客セグメンテーション
  - 要因分析
  の妥当性は低いと判断

---

## 結論
本購買ログデータに基づく分析では、

- 顧客行動の差異を説明する情報が不足しており
- 施策設計やモデル化を行う前提条件は成立していない

と結論づけた。

---

## ネクストアクション
- 閲覧履歴、接触履歴、キャンペーン接触情報など、
  行動文脈を補足するデータの追加
- 追加データ取得後、改めてEDA・分析方針を検討

---

## 本ケースのポイント
- **EDAを「前提条件の検証」として位置づけ**
- 分析を進めないという判断を、実務上の結論として明示
- SQLとPythonの役割を分離し、分析プロセスを明確化
- 無理に施策やモデルにつなげない判断を重視

---

## ディレクトリ構成
```text
case02/
├─ README.md
├─ sql/            # 顧客単位指標の作成クエリ
├─ notebooks/      # EDA用ノートブック
└─ reports/        # 図表・要約資料
