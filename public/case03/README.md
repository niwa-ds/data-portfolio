# Case03：キャンペーン反応予測と施策判断  
**（Python / ロジスティック回帰 / 統計検定）**

## 背景・想定シナリオ
ECサイトにおいて、
キャンペーン施策（メール・クーポン配信等）による
購買促進が継続的に実施されている。

一方で、
- 全顧客一律配信による費用対効果の低下
- 顧客属性ごとの反応差が感覚的に語られている状態

といった課題が顕在化していた。

PdMから、以下の依頼を受けた想定とする。

> 「次回キャンペーンでは、
> 配信対象を絞ることで費用対効果を改善したい。
> 過去のキャンペーン結果と顧客属性データを用いて、
> “反応しやすい顧客像” を定量的に整理できないだろうか」

本ケースでは、
過去キャンペーンの反応ログと顧客属性データを用いて、
ロジスティック回帰および統計的検証を行い、
**次回施策における配信優先順位を判断するための材料を整理すること**
を目的とする。


---

## 分析目的
- キャンペーン反応（有無）に影響する要因を特定する
- 反応確率を用いて配信優先順位を設計する
- モデル結果を解釈し、施策判断に接続する

---

## 分析方針
- ブラックボックスモデルは用いず、**解釈可能性を重視**
- モデル結果だけに依存せず、統計検定による補足検証を行う
- 精度向上よりも、「なぜそう判断できるか」を重視する

---

## 使用データ
本ケースでは、Kaggle にて公開されている **Marketing Campaign Dataset** を使用している。

本データセットは、
顧客属性情報・購買行動・過去キャンペーンへの反応結果を含んでおり、
マーケティング施策の効果検証やターゲティング分析を想定した構成となっている。

- 顧客属性情報
  - 年齢（生年）、収入、学歴、婚姻ステータス など

- 購買・行動関連指標
  - 商品カテゴリ別支出額、購入回数、直近購買からの経過日数 など
- キャンペーン反応ログ
  - 過去キャンペーン（AcceptedCmp1〜AcceptedCmp5）への反応有無
  - 直近キャンペーンへの反応フラグ（Response）

本ケースでは、
直近キャンペーン（AcceptedCmp5）への反応有無を目的変数とし、
それ以前に取得可能な顧客属性情報を中心に分析を行っている。

参考：Marketing Campaign Dataset
https://www.kaggle.com/datasets/rodsaldanha/arketing-campaign

※ データそのものはリポジトリには含めていない。

---

## 分析プロセス

### 1. Pythonによる前処理・特徴量設計
- 欠損値・外れ値の確認
- カテゴリ変数のグルーピング
- キャンペーン後の行動を示す特徴量を除外し、事前に取得可能な情報のみを使用

前処理はすべてPythonで行い、  
モデル・検定で共通して使用するデータを整備した。

---

### 2. ロジスティック回帰による反応予測
- 目的変数：キャンペーン反応有無(`AcceptedCmp5`)
- 説明変数：顧客属性情報

ロジスティック回帰を用いて、
各特徴量がキャンペーン反応確率に与える影響を推定し、
係数およびオッズ比を通じて解釈を行った。

---

### 3. 統計検定による補足検証
モデル結果の解釈を補強するため、以下を実施。

- Welchのt検定：収入水準の差の検証
- χ²検定：カテゴリ属性と反応有無の関係確認

単一手法に依存せず、  
複数の視点から結果の妥当性を確認した。

---

## 結果・解釈

### 主な結果
本分析では、直近キャンペーンの結果を用いて
次回キャンペーンに反応しやすい顧客の特徴を分析した。

ロジスティック回帰の結果、収入および学歴は
他の顧客属性を調整した上でも、
キャンペーン反応確率に対して正の影響を与えることが示唆された。

また、単変量での統計検定においても、
収入水準および高学歴か否かにおいて
反応者・非反応者間で有意な差が確認された。

一方で、パートナー有無については
単変量では有意な差は確認されなかったものの、
多変量条件下では他属性と組み合わさることで
反応傾向に影響する可能性が示唆された。

これらの結果から、
収入および学歴はキャンペーン反応を説明する上で
比較的一貫した指標であると考えられる。

---

## 結論
- 一律配信ではなく、**収入を軸とした配信優先順位付け**が有効
- 単一属性ではなく、複数属性の組み合わせによる解釈が必要

---

## ネクストアクション（施策提案）
- 反応確率に基づいた配信優先度の設計
- 特に 高収入・高学歴のセグメントを重点対象として検討
- 以下のようなセグメント別施策の検討
  - 高収入 × 高学歴
  - 高収入 × パートナー有無
- セグメントごとに訴求メッセージを出し分けることで、
配信効率および反応率の向上を狙う

---

## 本ケースのポイント
- ロジスティック回帰を「予測」ではなく **判断材料** として使用
- 係数・オッズ比を用いた解釈重視の分析
- モデル結果と統計検定を組み合わせた多面的検証
- 「なぜその施策判断に至ったか」を説明可能な設計

---

## ディレクトリ構成
```text
case03/
├─ README.md
├─ notebooks/      # 前処理・モデリング・検定
└─ reports/        # 図表・要約資料
